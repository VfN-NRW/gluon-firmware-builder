From da52572ccfcd7cb61bf5dc6b570c57852ad940a8 Mon Sep 17 00:00:00 2001
From: RubenKelevra <ruben@freifunk-nrw.de>
Date: Sat, 17 Jun 2017 19:21:28 +0200
Subject: [PATCH] remove mesh-vpn reboot message

---
 .../lib/gluon/config-mode/reboot/0100-mesh-vpn.lua | 34 ----------------------
 1 file changed, 34 deletions(-)
 delete mode 100644 package/gluon-config-mode-mesh-vpn/luasrc/lib/gluon/config-mode/reboot/0100-mesh-vpn.lua

diff --git a/package/gluon-config-mode-mesh-vpn/luasrc/lib/gluon/config-mode/reboot/0100-mesh-vpn.lua b/package/gluon-config-mode-mesh-vpn/luasrc/lib/gluon/config-mode/reboot/0100-mesh-vpn.lua
deleted file mode 100644
index 4901aa5d..00000000
--- a/package/gluon-config-mode-mesh-vpn/luasrc/lib/gluon/config-mode/reboot/0100-mesh-vpn.lua
+++ /dev/null
@@ -1,34 +0,0 @@
-local uci = require("simple-uci").cursor()
-local lutil = require "gluon.web.util"
-
-local site = require 'gluon.site_config'
-local sysconfig = require 'gluon.sysconfig'
-local util = require "gluon.util"
-
-local pretty_hostname = require 'pretty_hostname'
-
-
-local meshvpn_enabled = uci:get_bool("fastd", "mesh_vpn", "enabled")
-
-local hostname = pretty_hostname.get(uci)
-local contact = uci:get_first("gluon-node-info", "owner", "contact")
-
-local pubkey
-local msg
-
-if meshvpn_enabled then
-	pubkey = util.trim(lutil.exec("/etc/init.d/fastd show_key mesh_vpn"))
-	msg = _translate('gluon-config-mode:pubkey')
-else
-	msg = _translate('gluon-config-mode:novpn')
-end
-
-if not msg then return end
-
-renderer.render_string(msg, {
-	pubkey = pubkey,
-	hostname = hostname,
-	site = site,
-	sysconfig = sysconfig,
-	contact = contact,
-})
-- 
2.13.1

